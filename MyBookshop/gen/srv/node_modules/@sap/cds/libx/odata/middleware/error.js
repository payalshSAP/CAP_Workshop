const { normalizeError } = require('../../_runtime/common/error/frontend')

module.exports = _srv =>
  function error(err, req, res, _next) {
    const { error, statusCode } = normalizeError(err, req)

    // NOTE: normalizeError already does sanatization -> we can use as is
    res.status(statusCode).json({ error })
  }
